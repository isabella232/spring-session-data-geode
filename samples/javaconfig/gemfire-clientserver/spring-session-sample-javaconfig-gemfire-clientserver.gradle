apply plugin: 'io.spring.convention.spring-sample-war'
apply plugin: "gemfire-server"
apply plugin: "application"
apply from: IDE_GRADLE

repositories {
	gradlePluginPortal()
}

dependencies {

	compile project(':spring-session-data-geode')
	compile "org.springframework:spring-web"
	compile "org.webjars:bootstrap"
	compile "org.webjars:webjars-taglib"
	compile jstlDependencies
	compile slf4jDependencies

	providedCompile "javax.servlet:javax.servlet-api"

	runtime "org.springframework.shell:spring-shell"

	testCompile "junit:junit"
	testCompile "org.assertj:assertj-core"
	testCompile seleniumDependencies

	integrationTestCompile seleniumDependencies

	integrationTestRuntime "org.springframework.shell:spring-shell"

}

mainClassName = 'sample.ServerConfig'

project.tasks.findByName("prepareAppServerForIntegrationTests")?.configure { task ->
	//println('Task gemfireServer' + project.tasks.findByName("gemfireServer"))
	project.tasks.findByName("gemfireServer")?.configure { gemfireServerTask ->
		//println "Task 'mainClassName' Property Value [$gemfireServerTask.mainClassName]"
		gemfireServerTask.mainClassName = this.mainClassName
		//println "Task 'mainClassName' Property Value [$gemfireServerTask.mainClassName]"
	}
}
